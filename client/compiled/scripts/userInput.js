'use strict';

var audioContext = new (window.AudioContext || window.webkitAudioContext)();
var analyser = audioContext.createAnalyser();
analyser.fftSize = 2048;
var bufferLength = analyser.frequencyBinCount;
var dataArray = new Uint8Array(bufferLength);

var getUserAudio = function getUserAudio() {
  if (navigator.mediaDevices.getUserMedia) {

    navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {
      console.log('Getting user audio via mediaDevices.getUserMedia');
      var source = audioContext.createMediaStreamSource(mediaStream);

      source.connect(analyser);

      setInterval(updateGraph.bind(this, dataArray), 100);
    });
  } else if (navigator.webkitGetUserMedia) {

    navigator.webkitGetUserMedia({ audio: true }, function (mediaStream) {
      console.log('Getting user audio via webkitGetUserMedia');
      var source = audioContext.createMediaStreamSource(mediaStream);

      source.connect(analyser);

      setInterval(updateGraph.bind(this, dataArray), 100);
    }, function (error) {
      console.log(error);
    });
  } else {

    alert('This browser does not support user audio input');
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NjcmlwdHMvdXNlcklucHV0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxlQUFlLEtBQUssT0FBTyxZQUFQLElBQXVCLE9BQU8sa0JBQW5DLEdBQW5CO0FBQ0EsSUFBSSxXQUFXLGFBQWEsY0FBYixFQUFmO0FBQ0EsU0FBUyxPQUFULEdBQW1CLElBQW5CO0FBQ0EsSUFBSSxlQUFlLFNBQVMsaUJBQTVCO0FBQ0EsSUFBSSxZQUFZLElBQUksVUFBSixDQUFnQixZQUFoQixDQUFoQjs7QUFFQSxJQUFJLGVBQWUsU0FBZixZQUFlLEdBQVc7QUFDNUIsTUFBSSxVQUFVLFlBQVYsQ0FBdUIsWUFBM0IsRUFBeUM7O0FBRXZDLGNBQVUsWUFBVixDQUF1QixZQUF2QixDQUFvQyxFQUFDLE9BQU0sSUFBUCxFQUFwQyxFQUNHLElBREgsQ0FDUSxVQUFTLFdBQVQsRUFBc0I7QUFDMUIsY0FBUSxHQUFSLENBQVksa0RBQVo7QUFDQSxVQUFJLFNBQVMsYUFBYSx1QkFBYixDQUFxQyxXQUFyQyxDQUFiOztBQUVBLGFBQU8sT0FBUCxDQUFlLFFBQWY7O0FBRUEsa0JBQVksWUFBWSxJQUFaLENBQWlCLElBQWpCLEVBQXVCLFNBQXZCLENBQVosRUFBK0MsR0FBL0M7QUFDRCxLQVJIO0FBVUQsR0FaRCxNQVlPLElBQUksVUFBVSxrQkFBZCxFQUFrQzs7QUFFdkMsY0FBVSxrQkFBVixDQUE2QixFQUFDLE9BQU0sSUFBUCxFQUE3QixFQUEyQyxVQUFTLFdBQVQsRUFBc0I7QUFDN0QsY0FBUSxHQUFSLENBQVksMkNBQVo7QUFDQSxVQUFJLFNBQVMsYUFBYSx1QkFBYixDQUFxQyxXQUFyQyxDQUFiOztBQUVBLGFBQU8sT0FBUCxDQUFlLFFBQWY7O0FBRUEsa0JBQVksWUFBWSxJQUFaLENBQWlCLElBQWpCLEVBQXVCLFNBQXZCLENBQVosRUFBK0MsR0FBL0M7QUFDRCxLQVBILEVBT0ssVUFBUyxLQUFULEVBQWdCO0FBQUUsY0FBUSxHQUFSLENBQVksS0FBWjtBQUFxQixLQVA1QztBQVNELEdBWE0sTUFXQTs7QUFFTCxVQUFNLGdEQUFOO0FBRUQ7QUFDRixDQTdCRCIsImZpbGUiOiJ1c2VySW5wdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7XG52YXIgYW5hbHlzZXIgPSBhdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbmFuYWx5c2VyLmZmdFNpemUgPSAyMDQ4O1xudmFyIGJ1ZmZlckxlbmd0aCA9IGFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50O1xudmFyIGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KCBidWZmZXJMZW5ndGggKTtcblxudmFyIGdldFVzZXJBdWRpbyA9IGZ1bmN0aW9uKCkge1xuICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcblxuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHthdWRpbzp0cnVlfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG1lZGlhU3RyZWFtKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIHVzZXIgYXVkaW8gdmlhIG1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEnKTtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShtZWRpYVN0cmVhbSk7XG5cbiAgICAgICAgc291cmNlLmNvbm5lY3QoYW5hbHlzZXIpO1xuXG4gICAgICAgIHNldEludGVydmFsKHVwZGF0ZUdyYXBoLmJpbmQodGhpcywgZGF0YUFycmF5KSwgMTAwKTtcbiAgICAgIH0pO1xuXG4gIH0gZWxzZSBpZiAobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSkge1xuXG4gICAgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSh7YXVkaW86dHJ1ZX0sIGZ1bmN0aW9uKG1lZGlhU3RyZWFtKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIHVzZXIgYXVkaW8gdmlhIHdlYmtpdEdldFVzZXJNZWRpYScpO1xuICAgICAgICB2YXIgc291cmNlID0gYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG1lZGlhU3RyZWFtKTtcblxuICAgICAgICBzb3VyY2UuY29ubmVjdChhbmFseXNlcik7XG5cbiAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlR3JhcGguYmluZCh0aGlzLCBkYXRhQXJyYXkpLCAxMDApO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsgY29uc29sZS5sb2coZXJyb3IpOyB9KTtcbiAgICBcbiAgfSBlbHNlIHtcblxuICAgIGFsZXJ0KCdUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB1c2VyIGF1ZGlvIGlucHV0Jyk7XG5cbiAgfVxufSJdfQ==